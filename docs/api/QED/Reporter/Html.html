<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <title>Class: QED::Reporter::Html</title>

  
    <link rel="SHORTCUT ICON" href="../../assets/icon/class.png">
  

  <link type="text/css" rel="stylesheet" href="../../assets/rdoc.css" media="screen" />
  <link type="text/css" rel="stylesheet" href="../../assets/highlight/styles/github.css" title="GitHub" />

  <script type="text/javascript" charset="utf-8" src="../../assets/jquery.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../assets/highlight/highlight.pack.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../assets/quicksearch.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../assets/main.js"></script>

  <script type="text/javascript">
    $(document).ready( function() {
      hookHighlightSyntax();
	    hookSourceViews();
	    hookDebuggingToggle();
	    hookQuickSearch();
	    highlightLocationTarget();

	    $('ul.link-list a').bind("click", highlightClickTarget);
    });
  </script>
</head>
<body class="class">
<div id="main">

  <div class="head">
    <h1>
      
        <img src="../../assets/icon/class.png" align="absmiddle">&nbsp;
      
      <a href="../../index.html">QED</a>&nbsp;
      <a href="/">QED::Reporter::Html</a>
    </h1>
  </div>

  <div id="metadata">
    <div id="project-metadata">

      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li class="file"><a href="../../lib/qed/reporter/html_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/qed/reporter/html.rb">lib/qed/reporter/html.rb</a></li>
          
          </ul>
        </div>
      </div>

      <!-- What about Git info, or Hg info? This seems almost silly, albeit kind of cool. -->
      <!-- TODO: generalize this for all SCMs -->

      
    </div>

    <div id="class-metadata">

      <!-- Parent Class -->
      
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        <ul>
          
          <!-- why was this class="link" ? -->
          <li class="class"><a href="Abstract.html">QED::Reporter::Abstract</a></li>
          
        </ul>
      </div>
      

      <!-- Namespace Contents -->
      

      <!-- Method Quickref -->
      
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
            
            <li class="singleton">
              <a href="#method-c-new">::new</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-after_document">#after_document</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-error">#error</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-fail">#fail</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-pass">#pass</a>
            </li>
          
        </ul>
      </div>
      

      <!-- Included Modules -->
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Information</h3>
        <ul>
        
          <li class="file"><a href="../../LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="../../History_rdoc.html">History.rdoc</a></li>
        
          <li class="file"><a href="../../README_rdoc.html">README.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="../../assets/icon/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <!-- classpage.html : classes -->
        <ul class="link-list">
        
          <li class="module"><a href="../../QED.html">QED</a></li>
        
          <li class="class"><a href="../../QED/Advice.html">QED::Advice</a></li>
        
          <li class="class"><a href="../../QED/Applique.html">QED::Applique</a></li>
        
          <li class="class"><a href="../../QED/Command.html">QED::Command</a></li>
        
          <li class="class"><a href="../../QED/Demo.html">QED::Demo</a></li>
        
          <li class="class"><a href="../../QED/Document.html">QED::Document</a></li>
        
          <li class="class"><a href="../../QED/Document/Markup.html">QED::Document::Markup</a></li>
        
          <li class="class"><a href="../../QED/Document/Markup/ToHTML.html">QED::Document::Markup::ToHTML</a></li>
        
          <li class="class"><a href="../../QED/Evaluator.html">QED::Evaluator</a></li>
        
          <li class="module"><a href="../../QED/FileFixtures.html">QED::FileFixtures</a></li>
        
          <li class="class"><a href="../../QED/Parser.html">QED::Parser</a></li>
        
          <li class="class"><a href="../../QED/Parser/Block.html">QED::Parser::Block</a></li>
        
          <li class="class"><a href="../../QED/Reporter/Abstract.html">QED::Reporter::Abstract</a></li>
        
          <li class="class"><a href="../../QED/Reporter/BulletPoint.html">QED::Reporter::BulletPoint</a></li>
        
          <li class="class"><a href="../../QED/Reporter/DotProgress.html">QED::Reporter::DotProgress</a></li>
        
          <li class="class"><a href="../../QED/Reporter/Html.html">QED::Reporter::Html</a></li>
        
          <li class="class"><a href="../../QED/Reporter/Verbatim.html">QED::Reporter::Verbatim</a></li>
        
          <li class="class"><a href="../../QED/Scope.html">QED::Scope</a></li>
        
          <li class="class"><a href="../../QED/Session.html">QED::Session</a></li>
        
          <li class="class"><a href="../../QED/Template.html">QED::Template</a></li>
        
          <li class="class"><a href="../../Object.html">Object</a></li>
        
          <li class="module"><a href="../../QEDoc.html">QEDoc</a></li>
        
          <li class="class"><a href="../../QEDoc/Command.html">QEDoc::Command</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>
    </div>

    <div id="validator-badges">
      
      <div style="float: right; margin-right: 5px;">
        <a href="http://validator.w3.org/check/referer"><img src="../../assets/icon/check.png" alt="[Validate]" height="16" width="16" /></a>
      </div>
      Generated with <a href="http://rubyworks.github.com/rdazzle">RDazzle Redfish</a> 1.4.0
      <br/><br/>
    </div>
  </div>

  <div id="documentation">

    <div id="description">
      

      <h1><a href="Html.html">Html</a> Reporter</h1>
<p>
FIXME: This must be completely redesigned since we moved back to text based
evaluation &#8212;which makes generting HTML with  modifications from the
evaluation tricky. But I&#8217;ve come up with a farily clever way to
handle this. Take the original and use Tilt to translate it into HTML, then
take the evaluation results for code steps and use it to search the HTML
for &#8220;the closest match&#8221;. Find the <pre> tag associated with the
text and add class and color style. Of course the tricky part is the
matching, but if we run the text snippet through Tilt as well we should be
able to get an exact match. It won&#8217;t be fast, but it should work.
</p>

    </div>

    <!-- Constants -->
    

    <!-- Attributes -->
    

    <!-- Methods -->
    
    <div id="public-class-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="new-method" class="method-detail ">
        <a name="method-c-new"></a>

        <div class="method-heading">
        
          <span class="method-name">new</span><span
            class="method-args">(*args)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="new-source">
<pre>
    <span class="ruby-comment cmt"># File lib/qed/reporter/html.rb, line 24</span>
24:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(*<span class="ruby-identifier">args</span>)
25:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;HTML format is not currently working&quot;</span>
26:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  
    <div id="public-instance-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="after-document-method" class="method-detail ">
        <a name="method-i-after_document"></a>

        <div class="method-heading">
        
          <span class="method-name">after_document</span><span
            class="method-args">(demo)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="after-document-source">
<pre>
    <span class="ruby-comment cmt"># File lib/qed/reporter/html.rb, line 64</span>
64:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_document</span>(<span class="ruby-identifier">demo</span>)
65:       <span class="ruby-identifier">io</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">demo</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">to_s</span>
66:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="error-method" class="method-detail ">
        <a name="method-i-error"></a>

        <div class="method-heading">
        
          <span class="method-name">error</span><span
            class="method-args">(step, exception)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="error-source">
<pre>
    <span class="ruby-comment cmt"># File lib/qed/reporter/html.rb, line 48</span>
48:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">error</span>(<span class="ruby-identifier">step</span>, <span class="ruby-identifier">exception</span>)
49:       <span class="ruby-identifier">raise</span> <span class="ruby-identifier">exception</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
50: 
51:       <span class="ruby-identifier">step</span>[<span class="ruby-value str">'class'</span>] = <span class="ruby-value str">'error'</span>          <span class="ruby-comment cmt"># TODO add class not replace</span>
52:       <span class="ruby-identifier">step</span>[<span class="ruby-value str">'style'</span>] = <span class="ruby-value str">'color: red;'</span>    <span class="ruby-comment cmt"># TODO add style not replace</span>
53: 
54:       <span class="ruby-identifier">msg</span> = <span class="ruby-value str">&quot;\n&quot;</span>
55:       <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  ##### ERROR #####\n&quot;</span>
56:       <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  # &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span>
57:       <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  # &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>]
58:       <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
59: 
60:       <span class="ruby-identifier">step</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">msg</span>))
61:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="fail-method" class="method-detail ">
        <a name="method-i-fail"></a>

        <div class="method-heading">
        
          <span class="method-name">fail</span><span
            class="method-args">(step, assertion)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="fail-source">
<pre>
    <span class="ruby-comment cmt"># File lib/qed/reporter/html.rb, line 35</span>
35:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fail</span>(<span class="ruby-identifier">step</span>, <span class="ruby-identifier">assertion</span>)
36:       <span class="ruby-identifier">step</span>[<span class="ruby-value str">'class'</span>] = <span class="ruby-value str">'fail'</span>           <span class="ruby-comment cmt"># TODO add class not replace</span>
37:       <span class="ruby-identifier">step</span>[<span class="ruby-value str">'style'</span>] = <span class="ruby-value str">'color: red;'</span>    <span class="ruby-comment cmt"># TODO add style not replace</span>
38: 
39:       <span class="ruby-identifier">msg</span> = <span class="ruby-value str">&quot;\n&quot;</span>
40:       <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  ##### FAIL #####\n&quot;</span>
41:       <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  # &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">assertion</span>.<span class="ruby-identifier">to_s</span>
42:       <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
43: 
44:       <span class="ruby-identifier">step</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">msg</span>))
45:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="pass-method" class="method-detail ">
        <a name="method-i-pass"></a>

        <div class="method-heading">
        
          <span class="method-name">pass</span><span
            class="method-args">(step)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="pass-source">
<pre>
    <span class="ruby-comment cmt"># File lib/qed/reporter/html.rb, line 29</span>
29:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pass</span>(<span class="ruby-identifier">step</span>)
30:       <span class="ruby-identifier">step</span>[<span class="ruby-value str">'class'</span>] = <span class="ruby-value str">'pass'</span>           <span class="ruby-comment cmt"># TODO add class not replace</span>
31:       <span class="ruby-identifier">step</span>[<span class="ruby-value str">'style'</span>] = <span class="ruby-value str">'color: green;'</span>  <span class="ruby-comment cmt"># TODO add style not replace</span>
32:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  

  </div>


  <div id="rdoc-debugging-section-dump" class="debugging-section">
  
    <p>Disabled; run with --debug to generate this.</p>
  
  </div>

</main>
</body>
</html>

