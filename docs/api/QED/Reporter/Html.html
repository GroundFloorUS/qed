<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: QED::Reporter::Html</title>

  <link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

  <script src="../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../../lib/qed/reporter/html_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/qed/reporter/html.rb">lib/qed/reporter/html.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">Abstract</p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-after_document">#after_document</a></li>
          
          <li><a href="#method-i-error">#error</a></li>
          
          <li><a href="#method-i-fail">#fail</a></li>
          
          <li><a href="#method-i-pass">#pass</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../../History_rdoc.html">History.rdoc</a></li>
        
          <li class="file"><a href="../../LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="../../README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="../../Routine.html">Routine</a></li>
        
          <li class="file"><a href="../../Version.html">Version</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../../QED.html">QED</a></li>
        
          <li><a href="../../QED/Advice.html">QED::Advice</a></li>
        
          <li><a href="../../QED/Applique.html">QED::Applique</a></li>
        
          <li><a href="../../QED/Demo.html">QED::Demo</a></li>
        
          <li><a href="../../QED/Document.html">QED::Document</a></li>
        
          <li><a href="../../QED/Document/Markup.html">QED::Document::Markup</a></li>
        
          <li><a href="../../QED/Document/Markup/ToHTML.html">QED::Document::Markup::ToHTML</a></li>
        
          <li><a href="../../QED/Evaluator.html">QED::Evaluator</a></li>
        
          <li><a href="../../QED/FileFixtures.html">QED::FileFixtures</a></li>
        
          <li><a href="../../QED/Parser.html">QED::Parser</a></li>
        
          <li><a href="../../QED/Parser/Block.html">QED::Parser::Block</a></li>
        
          <li><a href="../../QED/Reporter.html">QED::Reporter</a></li>
        
          <li><a href="../../QED/Reporter/Abstract.html">QED::Reporter::Abstract</a></li>
        
          <li><a href="../../QED/Reporter/BulletPoint.html">QED::Reporter::BulletPoint</a></li>
        
          <li><a href="../../QED/Reporter/DotProgress.html">QED::Reporter::DotProgress</a></li>
        
          <li><a href="../../QED/Reporter/Html.html">QED::Reporter::Html</a></li>
        
          <li><a href="../../QED/Reporter/Verbatim.html">QED::Reporter::Verbatim</a></li>
        
          <li><a href="../../QED/Scope.html">QED::Scope</a></li>
        
          <li><a href="../../QED/Session.html">QED::Session</a></li>
        
          <li><a href="../../QED/Settings.html">QED::Settings</a></li>
        
          <li><a href="../../QED/Template.html">QED::Template</a></li>
        
          <li><a href="../../QEDoc.html">QEDoc</a></li>
        
          <li><a href="../../QEDoc/Command.html">QEDoc::Command</a></li>
        
          <li><a href="../../Object.html">Object</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">QED::Reporter::Html</h1>

    <div id="description" class="description">
      
<h1><a href="Html.html">Html</a> <a href="../Reporter.html">Reporter</a></h1>

<p>FIXME: This must be completely redesigned since we moved back to text based
evaluation –which makes generting HTML with  modifications from the
evaluation tricky. But I’ve come up with a farily clever way to handle
this. Take the original and use Tilt to translate it into HTML, then take
the evaluation results for code steps and use it to search the HTML for
“the closest match”. Find the &lt;pre&gt; tag associated with the text
and add class and color style. Of course the tricky part is the matching,
but if we run the text snippet through Tilt as well we should be able to
get an exact match. It won’t be fast, but it should work.</p>

    </div><!-- description -->

    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(*args)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/qed/reporter/html.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;HTML format is not currently working&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="after_document-method" class="method-detail ">
          <a name="method-i-after_document"></a>

          
          <div class="method-heading">
            <span class="method-name">after_document</span><span
              class="method-args">(demo)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="after_document-source">
<pre>
<span class="ruby-comment"># File lib/qed/reporter/html.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">after_document</span>(<span class="ruby-identifier">demo</span>)
  <span class="ruby-identifier">io</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">demo</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- after_document-source -->
            
          </div>

          

          
        </div><!-- after_document-method -->

      
        <div id="error-method" class="method-detail ">
          <a name="method-i-error"></a>

          
          <div class="method-heading">
            <span class="method-name">error</span><span
              class="method-args">(step, exception)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="error-source">
<pre>
<span class="ruby-comment"># File lib/qed/reporter/html.rb, line 48</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">error</span>(<span class="ruby-identifier">step</span>, <span class="ruby-identifier">exception</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-identifier">exception</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$DEBUG</span>

  <span class="ruby-identifier">step</span>[<span class="ruby-string">'class'</span>] = <span class="ruby-string">'error'</span>          <span class="ruby-comment"># TODO add class not replace</span>
  <span class="ruby-identifier">step</span>[<span class="ruby-string">'style'</span>] = <span class="ruby-string">'color: red;'</span>    <span class="ruby-comment"># TODO add style not replace</span>

  <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;\n&quot;</span>
  <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  ##### ERROR #####\n&quot;</span>
  <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  # &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
  <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  # &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>]
  <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\n&quot;</span>

  <span class="ruby-identifier">step</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">msg</span>))
<span class="ruby-keyword">end</span></pre>
            </div><!-- error-source -->
            
          </div>

          

          
        </div><!-- error-method -->

      
        <div id="fail-method" class="method-detail ">
          <a name="method-i-fail"></a>

          
          <div class="method-heading">
            <span class="method-name">fail</span><span
              class="method-args">(step, assertion)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="fail-source">
<pre>
<span class="ruby-comment"># File lib/qed/reporter/html.rb, line 35</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fail</span>(<span class="ruby-identifier">step</span>, <span class="ruby-identifier">assertion</span>)
  <span class="ruby-identifier">step</span>[<span class="ruby-string">'class'</span>] = <span class="ruby-string">'fail'</span>           <span class="ruby-comment"># TODO add class not replace</span>
  <span class="ruby-identifier">step</span>[<span class="ruby-string">'style'</span>] = <span class="ruby-string">'color: red;'</span>    <span class="ruby-comment"># TODO add style not replace</span>

  <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;\n&quot;</span>
  <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  ##### FAIL #####\n&quot;</span>
  <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  # &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">assertion</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\n&quot;</span>

  <span class="ruby-identifier">step</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">msg</span>))
<span class="ruby-keyword">end</span></pre>
            </div><!-- fail-source -->
            
          </div>

          

          
        </div><!-- fail-method -->

      
        <div id="pass-method" class="method-detail ">
          <a name="method-i-pass"></a>

          
          <div class="method-heading">
            <span class="method-name">pass</span><span
              class="method-args">(step)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="pass-source">
<pre>
<span class="ruby-comment"># File lib/qed/reporter/html.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pass</span>(<span class="ruby-identifier">step</span>)
  <span class="ruby-identifier">step</span>[<span class="ruby-string">'class'</span>] = <span class="ruby-string">'pass'</span>           <span class="ruby-comment"># TODO add class not replace</span>
  <span class="ruby-identifier">step</span>[<span class="ruby-string">'style'</span>] = <span class="ruby-string">'color: green;'</span>  <span class="ruby-comment"># TODO add style not replace</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- pass-source -->
            
          </div>

          

          
        </div><!-- pass-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

